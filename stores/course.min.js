!function(e){var t=function(e){return t.State=e,new Vuex.Store({namespaced:!0,state:t.State,getters:t.Getters,mutations:t.Mutations,actions:t.Actions,modules:{section:FE_Section_Store({})}})};t.Getters={course_ID:function(e){return e.course_ID},item_Id:function(e){return e.item_ID},courseItemTypes:function(e){return e.course_item_types},active_tab:function(e){return e.active_tab},sections:function(e){return e.sections},countItems:function(t){var n=0;return e.each(t.sections,function(){n+=this.items.length}),n},identify:function(e){return e.identify},questionFields:function(e){return e.post_type_fields.lp_question},settings:function(e){return e.settings},all:function(e){return e}},t.Mutations={updateItemsOrder:function(e,t){e.section.items=t.items},deleteItem:function(t,n){if(null!=n.code&&1==n.code&&null!=n.data){var i=n.data,o=i.item_ID,u=i.section_ID,r=t.sections.findIndex(function(e){return e.id==u}),s=t.sections[r];if(s&&s.items){e.isArray(o)||(o=[o]);for(var c=0,_=o.length;c<_;c++){var d=o[c],f=s.items.findIndex(function(e){return e.id==d});f>-1&&s.items.splice(f,1)}}}},removeSection:function(e,t){var n=t.section_ID,i=e.sections.findIndex(function(e){return e.id==n});-1!==i&&e.sections.splice(i,1)},newRequest:function(){},requestComplete:function(){}},t.Actions={removeSection:function(e,t){return new Promise(function(e,n){FE_Helpers.Course_Editor_Request("","remove-section",FE_Helpers.omitObjects(t)).then(function(t){e(t)},function(e){n(e)})})},updateSection:function(e,t){return new Promise(function(e,n){FE_Helpers.Course_Editor_Request("","update-section",FE_Helpers.omitObjects(t)).then(function(t){e(t)},function(e){n(e)})})},updateItemsOrder:function(e,t){return new Promise(function(e,n){FE_Helpers.Course_Editor_Request("","update-items-order",{section_ID:t.section_ID,items:t.items.listPluck("id"),__activity:!0}).then(function(t){e(t)},function(e){n(e)})})},updateSectionsOrder:function(e,t){return new Promise(function(e,n){FE_Helpers.Course_Editor_Request("","update-sections-order",{sections:t.sections.listPluck("id"),__activity:!0}).then(function(t){e(t)},function(e){n(e)})})},updateHiddenSections:function(e,t){return new Promise(function(e,n){FE_Helpers.Course_Editor_Request("","update-hidden-sections",{sections:t}).then(function(t){e(t)},function(e){n(e)})})},deleteItem:function(e,t){$vm=this;var n=t.item_ID,i={section_ID:t.section_ID,item_ID:n,trash:t.trash,__activity:!0};FE_Helpers.Course_Editor_Request("","delete-course-item",i).then(function(t){e.commit("deleteItem",t)},function(e){reject(e)})},addNewItem:function(e,t){return new Promise(function(e,n){FE_Helpers.Course_Editor_Request("","add-course-item",{section_ID:t.section_ID,item:t.item,position:t.position,__activity:!0}).then(function(t){e(t)},function(e){n(e)})})},addItem:function(t,n){return new Promise(function(t,i){FE_Helpers.Course_Editor_Request("","add-course-items",e.extend({__activity:!0},{},n)).then(function(e){t(e)},function(e){i(e)})})},toggleItemPreview:function(t,n){FE_Helpers.Course_Editor_Request("","toggle-item-preview",e.extend({__activity:!0},{},n))},updateQuestion:function(t,n){return new Promise(function(t,i){FE_Helpers.Course_Editor_Request("","update-question",e.extend({__activity:!0},{},n)).then(function(e){t(e)},function(e){})})},changeQuestionType:function(t,n){return new Promise(function(t,i){FE_Helpers.Course_Editor_Request("","update-question",e.extend({context:"change-type",__activity:!0},n)).then(function(e){t(e)},function(e){t(e)})})},updateQuestionsOrder:function(t,n){return new Promise(function(t,i){FE_Helpers.Course_Editor_Request("","update-questions-order",e.extend({__activity:!0},n)).then(function(e){t(e)},function(e){i(e)})})},addQuestions:function(t,n){return new Promise(function(t,i){FE_Helpers.Course_Editor_Request("","add-questions",e.extend({__activity:!0},n)).then(function(e){t(e)},function(e){i(e)})})},queryItems:function(t,n){return new Promise(function(t,i){FE_Helpers.Course_Editor_Request("","modal-query-items",e.extend({},{},n)).then(function(e){t(e)},function(e){i(e)})})},updateSectionTitle:function(e,t){FE_Helpers.Course_Editor_Request("","update-section-title",t)},removeQuestion:function(e,t){return new Promise(function(e,n){FE_Helpers.Course_Editor_Request("","remove-question",{quiz_ID:t.quiz_ID,question_ID:t.question_ID,trash:t.trash,__activity:!0}).then(function(t){e(t)},function(e){n(e)})})},updateQuestionSettings:function(e,t){return new Promise(function(e,n){FE_Helpers.Course_Editor_Request("","update-question-settings",{question_ID:t.question_ID,settings:t.settings,__activity:!0}).then(function(t){e(t)},function(e){n(e)})})},updatePost:function(e,t){return new Promise(function(e,n){FE_Helpers.Course_Editor_Request("","update-post",{post_ID:t.post_ID,prop:t.prop,propContent:t.propContent,__activity:!0}).then(function(t){e(t)},function(e){n(e)})})},newRequest:function(t,n){e(document).trigger("FE.request-start",n)},requestComplete:function(t,n){e(document).trigger("FE.request-completed",n)},_blockContent:FE_Helpers.debounce(function(){e("#frontend-editor").addClass("ajaxloading")},0),_unblockContent:FE_Helpers.debounce(function(){e("#frontend-editor").removeClass("ajaxloading")},300)};Object.defineProperty(Array.prototype,"removeElementByField",{value:function(e,t){}}),e(document).ready(function(){t.Modules={section:FE_Section_Store};var n=e("input[name=lpFrontendCourseEditorSettings]");if(n.length){var i=n.val(),o=JSON.parse(i);window.FE_Course_Store=t(o.Course_Store_Data),window.FE_Localize=new function(){var e,t=new Vuex.Store((e=o.i18n,{namespaced:!0,state:FE_Helpers.clone(e),getters:{all:function(e){return e}}}));this.get=function(e){var n=t.getters.all[e];return void 0===n&&(n=e),n}}}})}(jQuery);