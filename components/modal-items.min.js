!function(t){"use strict";Vue.component("e-modal-pagination",{template:"#tmpl-e-modal-pagination",props:["total","page"],methods:{update:function(){this.$emit("pagination-update",this.page)},nextPage:function(){this.page<this.total&&(this.page++,this.update())},nextLastPage:function(){this.page<this.total&&(this.page=this.total,this.update())},previousPage:function(){this.page>1&&(this.page--,this.update())},previousFirstPage:function(){this.page>1&&(this.page=1,this.update())},_reload:function(){this.$parent.queryItems()}}}),Vue.component("e-modal-select-items",{template:"#tmpl-e-modal-select-items",props:["xyz","title","modalData"],data:function(){return{dataChanged:!1,currentType:"",items:[],term:"",selectedItems:[],pagination:{},status:"",view:"listing",filters:{itemsPerPage:10,filterBy:"",filterOrder:"asc"}}},watch:{term:function(t){return this._queryItems(this),t}},computed:{selectButton:function(){return void 0!==this.modalData.selectButton?this.modalData.selectButton:FE_Localize.get("modal_select_button")},modalTitle:function(){return this.modalData.modalTitle}},mounted:function(){this.currentType||(this.currentType=this.modalData.postTypes[0].type),this.queryItems(),t(window).trigger("resize")},methods:t.extend({},FE_Base.Store_Methods,{isCurrentTab:function(t){return this.currentType==t},queryItems:function(e){var i=this;e&&t(e.target).is("select")&&(this.pagination.current=1);var s=this.modalData,n=t.isFunction(s.exclude)?s.exclude.call(s.context):s.exclude;this.status="sending",this.$store().dispatch("queryItems",{term:this.term,type:this.currentType,context:this.modalData.screen,context_id:this.modalData.screenID,paged:this.pagination.current||1,exclude:n,filters:this.filters}).then(t.proxy(function(t){i.items=t.items,i.pagination=t.pagination||{},i.status=""},this))},isSelected:function(t){return-1!==this.selectedItems.findIndex(function(e){return e==t||e.id==t})},modalClass:function(){var t=["e-modal"];return t.push(this.status),t},countSelectedItems:function(){return this.selectedItems.length?" ("+this.selectedItems.length+")":""},filterClass:function(t){var e=["e-sort-items"];return this.filters.filterBy===t&&(e.push("current"),e.push(this.filters.filterOrder)),e},getItemTitle:function(t){var e=this.getItem(t);if(e)return e.title},getItem:function(t){return this.items.find(function(e){return e.id==t})},_queryItems:FE_Helpers.debounce(function(t){t.queryItems()},300),_close:function(t){t.preventDefault(),this.xyz.show=!1},_changeType:function(t,e){this.currentType=e,this.queryItems()},_selectItem:function(t){var e=t.target;if(e.checked)this.isSelected(e.value)||this.selectedItems.push(this.getItem(e.value));else{var i=this.selectedItems.findIndex(function(t){return t==e.value||t.id==e.value});-1!==i&&this.selectedItems.splice(i,1)}},_changePage:function(t){this.pagination.current=t,this.queryItems()},_switch:function(t,e){this.view=e},_clear:function(){this.selectedItems=[]},_sort:function(t,e){""===this.filters.filterBy?this.filters.filterOrder="asc":this.filters.filterBy===e&&("asc"===this.filters.filterOrder?this.filters.filterOrder="desc":e=""),this.filters.filterBy=e,this.queryItems()},_select:function(){if(this.modalData){var t=this.modalData;t.select&&t.select.apply(t.context,[{items:this.selectedItems}]),this.selectedItems=[],this.queryItems()}}})})}(jQuery);